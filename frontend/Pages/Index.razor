@page "/"
@inherits LayoutComponentBase
@inject NavigationManager NavigationManager
@inject AppState AppState

<!-- Skal vÃ¦re en form istedet for mange forskellige div's -->
<div class="container">
    <form action="" @onsubmit="Login">
        <div class="form-group">
            <input @bind="email" type="email" class="form-control" id="Usernamebox" placeholder="Enter email" name="Uname" required>
        </div>
        <div class="form-group">
            <input type="password" class="form-control" id="Passwordbox" placeholder="Enter Password" name="Pword" required>
        </div>
        <div class="form-group">
            <div class="form-check">
                <input type="checkbox" class="form-check-input" id="remember" checked="checked" name="remember"> 
                <label class="form-check-label" for="remember">Remember me </label>
            </div>
        </div>
        <button type="submit" class="btn btn-primary btn-block" @onclick="Login">Login</button>
    </form>
    <span class="psw"><a href="/ForgotPassword">Forgot password?</a></span>
</div>

@code {
    string email;

    void Login()
    {
        if(AppState.Login(email)) NavigationManager.NavigateTo("/PosterManagement");
    }

    protected override void OnInitialized()
    {
        if (AppState.Auth)
        {
            NavigationManager.NavigateTo("/PosterManagement");
        }
    }
}