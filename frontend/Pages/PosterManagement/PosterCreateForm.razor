@using MudBlazor
@using Shared.Manager
@inherits CreateForm<Poster>

<MudForm @ref="_form">
    <MudCard>
        <MudCardContent>
            <MudTextField Required="@true" FullWidth="true" @bind-Value="_precreateItem.name"
                Label="Poster name" />
            <MudDatePicker Required="@true" MinDate="DateTime.Now" MaxDate="_precreateItem.endDate"
                ShowWeekNumbers="true" Label="Start date" @bind-Date="_precreateItem.startDate"
                DateFormat="dd/MM/yyyy" />
            <MudDatePicker Required="@true" MinDate="_precreateItem.startDate"
                ShowWeekNumbers="true" Label="End date" @bind-Date="_precreateItem.endDate"
                DateFormat="dd/MM/yyyy" />
            <MudTextField Required="@true" FullWidth="true" @bind-Value="_precreateItem.image"
                Label="Image url" />
            @* <InputFile id="fileInput" hidden accept=".jpg, .jpeg, .png" /> *@
            <MudCardActions>
                <MudButton Disabled="@true" Variant="Variant.Filled"
                    StartIcon="@Icons.Filled.CloudUpload" for="fileInput" FullWidth="true">
                    Upload poster</MudButton>
            </MudCardActions>
            <MudCardActions>
                <MudButton Variant="Variant.Filled" Color="Color.Primary" @onclick="OnAddItem"
                    FullWidth="true">Add Poster</MudButton>
            </MudCardActions>
            <MudCardActions>
                <MudButton FullWidth="true" @onclick="OnCancel" Variant="Variant.Filled"
                    Color="Color.Warning">Cancel</MudButton>
            </MudCardActions>
        </MudCardContent>
    </MudCard>
</MudForm>

@code
{
    [CascadingParameter]
    protected User _user { get; set; }

    protected override void OnInitialized()
    {
        base.OnInitialized();
        _precreateItem.createdBy = _user;
        _precreateItem.image = "";
    }
}