@using MudBlazor
@inherits CreateForm<Poster>

<MudForm>
    <MudCard>
        <MudCardContent>
            <MudTextField FullWidth="true" @bind-Value="_precreateItem.name" Label="Postername"
                Placeholder="Postername..." Class="mb-3" />
            <MudDatePicker Class="mb-3" MinDate="DateTime.Now" MaxDate="_precreateItem.endDate" ShowWeekNumbers="true"
                Label="Start date" @bind-Date="_precreateItem.startDate" DateFormat="dd/MM/yyyy" />
            <MudDatePicker Class="mb-3" MinDate="_precreateItem.startDate" ShowWeekNumbers="true" Label="End date"
                @bind-Date="_precreateItem.endDate" DateFormat="dd/MM/yyyy" />
            <InputFile id="fileInput" hidden accept=".jpg, .jpeg, .png" />
            <MudButton Variant="Variant.Filled" StartIcon="@Icons.Filled.CloudUpload" for="fileInput" FullWidth="true"
                Class="mb-3">Upload poster</MudButton>
            <MudButton Variant="Variant.Filled" Color="Color.Primary" FullWidth="true" Class="mb-3" @onclick="PostItem">
                Add Poster
            </MudButton>
            <MudButton Variant="Variant.Filled" Color="Color.Secondary" FullWidth="true">Cancel</MudButton>
        </MudCardContent>
    </MudCard>
</MudForm>

@code
{
    [CascadingParameter]
    protected User _user { get; set; }

    protected override void OnInitialized()
    {
        base.OnInitialized();
        _precreateItem.createdBy = _user;
    }
}